const products=[
    {
        "id": 1,
        "name": "Wireless Bluetooth Headphones",
        "category": "Electronics",
        "price": 49.99,
        "rating": 4.5,
        "image": "https://rukminim2.flixcart.com/image/612/612/xif0q/headphone/v/p/3/-original-imah8bfrrurageu2.jpeg?q=70"
      },
      {
        "id": 2,
        "name": "Gaming Mouse",
        "category": "Electronics",
        "price": 29.99,
        "rating": 4.2,
        "image": "https://rukminim2.flixcart.com/image/612/612/kt4ozgw0/mouse/o/i/y/g102-light-sync-logitech-original-imag6jj3yqnb2zdf.jpeg?q=70"
      },
      {
        "id": 3,
        "name": "Mechanical Keyboard",
        "category": "Electronics",
        "price": 79.99,
        "rating": 4.7,
        "image": "https://rukminim2.flixcart.com/image/612/612/xif0q/keyboard/gaming-keyboard/g/t/t/katana-x2-tkl-mechanical-evofox-original-imah4yj6r7ncvegh.jpeg?q=70"
      },
      {
        "id": 4,
        "name": "Smartwatch",
        "category": "Wearable",
        "price": 199.99,
        "rating": 4.8,
        "image": "https://rukminim2.flixcart.com/image/612/612/xif0q/smartwatch/s/3/l/-original-imah2thyufannsyg.jpeg?q=70"
      },
      {
        "id": 5,
        "name": "Running Shoes",
        "category": "Fashion",
        "price": 59.99,
        "rating": 4.3,
        "image": "https://rukminim2.flixcart.com/image/612/612/xif0q/shoe/d/t/z/-original-imagz5kyh95rcyug.jpeg?q=70"
      },
      {
        "id": 6,
        "name": "Leather Wallet",
        "category": "Fashion",
        "price": 19.99,
        "rating": 4.0,
        "image": "https://rukminim2.flixcart.com/image/612/612/xif0q/wallet-card-wallet/k/c/4/rfid-protected-100-genuine-leather-wallet-for-men-pen-combo-1-9-original-imah9k4t24vsgrxz.jpeg?q=70"
      },
      {
        "id": 7,
        "name": "Digital Camera",
        "category": "Electronics",
        "price": 349.99,
        "rating": 4.6,
        "image": "https://rukminim2.flixcart.com/image/312/312/xif0q/dslr-camera/n/p/t/eos-r50-24-2-r50-canon-original-imagngc7syac8pfd.jpeg?q=70"
      },
      {
        "id": 8,
        "name": "Backpack",
        "category": "Accessories",
        "price": 39.99,
        "rating": 4.4,
        "image": "https://rukminim2.flixcart.com/image/612/612/xif0q/backpack/8/9/l/-original-imah2uw5gjzauzqt.jpeg?q=70"
      },
      {
        "id": 9,
        "name": "Sunglasses",
        "category": "Fashion",
        "price": 24.99,
        "rating": 4.1,
        "image": "https://rukminim2.flixcart.com/image/612/612/xif0q/sunglass/u/p/s/free-retro-metal-sunglasses-with-tiger-decoration-square-rimless-original-imah2zq4jydmqhuw.jpeg?q=70"
      },
      {
        "id": 10,
        "name": "Water Bottle",
        "category": "Home & Kitchen",
        "price": 14.99,
        "rating": 4.2,
        "image": "https://rukminim2.flixcart.com/image/612/612/kjlrb0w0-0/bottle/t/2/d/500-smart-vacuum-insulated-water-bottle-with-led-temperature-original-imafz4q3q83cjdzs.jpeg?q=70"
      },
      {
        "id": 11,
        "name": "Bluetooth Speaker",
        "category": "Electronics",
        "price": 59.99,
        "rating": 4.5,
        "image": "https://rukminim2.flixcart.com/image/612/612/xif0q/speaker/q/e/7/-original-imah7effhzz6ku5a.jpeg?q=70"
      },
      {
        "id": 12,
        "name": "Electric Kettle",
        "category": "Home & Kitchen",
        "price": 34.99,
        "rating": 4.6,
        "image": "https://rukminim2.flixcart.com/image/612/612/l5iid8w0/electric-kettle/1/2/c/-original-imagg6ekh4muwjrx.jpeg?q=70"
      },
      {
        "id": 13,
        "name": "Portable Power Bank",
        "category": "Electronics",
        "price": 39.99,
        "rating": 4.3,
        "image": "https://rukminim2.flixcart.com/image/612/612/xif0q/power-bank/y/q/b/-original-imah439zxhbh6ueg.jpeg?q=70"
      },
      {
        "id": 14,
        "name": "Smart LED Bulb",
        "category": "Home & Kitchen",
        "price": 19.99,
        "rating": 4.7,
        "image": "https://rukminim2.flixcart.com/image/612/612/l47cu4w0/smart-lighting/v/e/n/10-essld1in007p-led-avita-original-imagf5h4syvrf5ve.jpeg?q=70"
      },
      {
        "id": 15,
        "name": "Noise Cancelling Earbuds",
        "category": "Electronics",
        "price": 89.99,
        "rating": 4.8,
        "image": "https://rukminim2.flixcart.com/image/612/612/xif0q/headphone/x/6/6/-original-imagzv54hzzudcmy.jpeg?q=70"
      },
      {
        "id": 16,
        "name": "Travel Pillow",
        "category": "Accessories",
        "price": 22.99,
        "rating": 4.2,
        "image": "https://rukminim2.flixcart.com/image/612/612/xif0q/pillow/2/7/w/14-ultimate-cozy-sleeping-pillow-high-density-gel-microfiber-bed-original-imahynuuygcfzdvw.jpeg?q=70"
      },
      {
        "id": 17,
        "name": "Yoga Mat",
        "category": "Fitness",
        "price": 29.99,
        "rating": 4.5,
        "image": "https://rukminim2.flixcart.com/image/612/612/xif0q/sport-mat/p/b/g/eva-tpe-anti-slip-home-gym-exercise-workout-fitness-for-men-original-imah4qn9cdjt4mss.jpeg?q=70"
      },
      {
        "id": 18,
        "name": "Men's Wrist Watch",
        "category": "Fashion",
        "price": 129.99,
        "rating": 4.6,
        "image": "https://rukminim2.flixcart.com/image/612/612/xif0q/watch/9/h/o/1-bi5110-54x-citizen-men-original-imagqsjn4z72ghyt.jpeg?q=70"
      },
      {
        "id": 19,
        "name": "Wireless Charger",
        "category": "Electronics",
        "price": 27.99,
        "rating": 4.3,
        "image": "https://rukminim2.flixcart.com/image/612/612/xif0q/charging-pad/f/p/b/15w-wireless-charger-oxford-series-fast-pd-qi-certified-with-original-imah9ppybhhdjmfg.jpeg?q=70"
      },
      {
        "id": 20,
        "name": "Graphic T-Shirt",
        "category": "Fashion",
        "price": 19.99,
        "rating": 4.1,
        "image": "https://rukminim2.flixcart.com/image/612/612/xif0q/t-shirt/i/4/c/xxl-royalty-crown-r-men-tshirt-bqf-original-imagzbze4tcsv5qk.jpeg?q=70"
    }
];

let products1=document.querySelector("#products");
// if(products1){
//   showListing(products);
// }
function showListing(array){
    array.forEach((el,index)=>{
        let productBox=document.createElement("div");
        productBox.className="product-box";

        let heading=document.createElement("h3");
        heading.innerText= el.category;

        let img=document.createElement("img");
        img.src=`${el.image}`;

        let name=document.createElement("h4");
        name.innerText=el.name;

        let price=document.createElement("h3");
        price.innerText=el.price;

        let rating=document.createElement("h3");
        rating.innerText=el.rating;

        let button=document.createElement("button");
        button.innerText="Add To Cart";
        button.addEventListener("click",()=>{
            addToCart(el,index);
            alert("Item added to Cart");
        });
        productBox.append(heading,img,name,price,rating,button);
        document.getElementById("products").append(productBox);

    });
}
showListing(products);
// sort item....
let sort=document.querySelector('#priceSort');
sort.addEventListener("change",()=>{
    let value1=sort.value;
    if(value1 == "asc"){
        let sortedData = products.sort((a,b)=>{
            return a.name.localeCompare(b.name); 
        })
        products1.innerHTML ="";
        showListing(sortedData);
    }
    if(value1 == "dec"){
        let sortedData = products.sort((a,b)=>{
            return b.name.localeCompare(a.name);
        })
        products1.innerHTML ="";
        showListing(sortedData);
    }

});

// filter by category
let filter= document.querySelector('#categoryFilter');
filter.addEventListener('change',function(){
    let value=filter.value;
    let filteredData= products.filter(item => item.category === value);
    products1.innerHTML = "";
    showListing(filteredData);
})

// search
let search= document.querySelector('#search');
search.addEventListener('input',()=>{
  let query = search.value.toLowerCase();
  let searchValue= products.filter((item)=>{
    return item.name.toLocaleLowerCase().includes(query);
  });
  products1.innerHTML="";
  if(searchValue.length===0){
    products1.innerHTML="<p>No Item Found</p>";
  }
  else{
    showListing(searchValue);
  }
})
// let productsToDisplay=[...products];
// document.getElementById('#search')?.addEventListener('input', debounce(searchProducts, 300));
// //search using debounce
// function searchProducts() {
//   const query = document.getElementById('#search').value.toLowerCase();
//   productsToDisplay = products.filter(p => p.name.toLowerCase().includes(query));
//   showListing(productsToDisplay);
// }

// // Debounce
// function debounce(func, delay) {
//   let timer;
//   return () => {
//       clearTimeout(timer);
//       timer = setTimeout(func, delay);
//   };
// }

//filter price range
let priceFilter = document.querySelector('#priceRangeFilter');

if (priceFilter) {
    priceFilter.addEventListener('change', function () {
        let selectedRange = priceFilter.value;
        let filteredData = [];

        if (selectedRange === "all") {
            filteredData = products;
        } else if (selectedRange === "below-5000") {
            filteredData = products.filter(item => item.price < 5000);
        } else if (selectedRange === "5000-10000") {
            filteredData = products.filter(item => item.price >= 5000 && item.price <= 10000);
        } else if (selectedRange === "above-10000") {
            filteredData = products.filter(item => item.price > 10000);
        }

        products1.innerHTML = ""; // Clear existing products
        showListing(filteredData); // Display filtered products
    });
}





let cart=[];
function addToCart(el,index){
    cart.push(el);
    localStorage.setItem("cartData",JSON.stringify(cart));
}
// let cartButton=document.getElementById("cart");
// cartButton.addEventListener("click",function(){
//     window.location.href="cart.htm";
// })



